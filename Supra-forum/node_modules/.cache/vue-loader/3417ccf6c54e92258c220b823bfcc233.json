{"remainingRequest":"/Users/a123/Desktop/Supra 2/Supra-forum/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/a123/Desktop/Supra 2/Supra-forum/src/views/post_components/post.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/a123/Desktop/Supra 2/Supra-forum/src/views/post_components/post.vue","mtime":1575012514000},{"path":"/Users/a123/Desktop/Supra 2/Supra-forum/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/a123/Desktop/Supra 2/Supra-forum/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/a123/Desktop/Supra 2/Supra-forum/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/a123/Desktop/Supra 2/Supra-forum/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IFRvYXN0IH0gZnJvbSAibWludC11aSI7CmltcG9ydCBteWF4aW9zLCB7IHBvc3R0b3BpY1VSTCwgZ2V0c2Vzc2lvblVSTCB9IGZyb20gIkAvdG9vbHMvbXlheGlvcy5qcyI7CmltcG9ydCB7IEVBTFJFQURZIH0gZnJvbSAiY29uc3RhbnRzIjsKaW1wb3J0IG11aSBmcm9tICJALy4uL2xpYi9tdWkvanMvbXVpLmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcjogW10sCiAgICAgIGltZ19zcmM6IFtdLAogICAgICBmaWxlTGlzdDogW10KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBhZnRlclJlYWQoKSB7fSwKICAgIGFzeW5jIHBvc3RCdG4oKSB7CiAgICAgIHZhciBwbGF0ZSA9IHRoaXMuJHJlZnMucGxhdGUudmFsdWU7CiAgICAgIHZhciB0aXRsZSA9IHRoaXMuJHJlZnMudGl0bGUudmFsdWU7CiAgICAgIHZhciBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImVkaXRvciIpLnZhbHVlOwogICAgICB2YXIgaSA9IHRoaXMuZmlsZUxpc3Q7CiAgICAgIGxldCBwYXJhbXMgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgcGFyYW1zLmFwcGVuZCgicGxhdGUiLCBwbGF0ZSk7CiAgICAgIHBhcmFtcy5hcHBlbmQoInRpdGxlIiwgdGl0bGUpOwogICAgICBwYXJhbXMuYXBwZW5kKCJjb250ZW50IiwgY29udGVudCk7CiAgICAgIGkubWFwKGl0ZW0gPT4gewogICAgICAgIHZhciBpbWcgPSBpdGVtLmZpbGU7CiAgICAgICAgcGFyYW1zLmFwcGVuZCgiZmlsZSIsIGltZyk7CiAgICAgIH0pOwogICAgICBUb2FzdCgi5q2j5Zyo5LiK5Lyg5Zu+54mHLi4uIik7CiAgICAgIGF4aW9zCiAgICAgICAgLnBvc3QoIi9hcGkvdXBsb2FkaW1nIiwgcGFyYW1zLCB7CiAgICAgICAgICBoZWFkZXJzOiB7ICJDb250ZW50LVR5cGUiOiAibXVsdGlwYXJ0L2Zvcm0tZGF0YSIgfQogICAgICAgIH0pCiAgICAgICAgLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09IDEwMSkgewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiLyIpOwogICAgICAgICAgICBUb2FzdChyZXMuZGF0YS5tZXNzYWdlKTsKICAgICAgICAgIH0gZWxzZSBpZiAocmVzLmRhdGEuY29kZSA9PSAxMDIpIHsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9sb2dpbiIpOwogICAgICAgICAgICBUb2FzdChyZXMuZGF0YS5tZXNzYWdlKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIFRvYXN0KHJlcy5kYXRhLm1lc3NhZ2UpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgfQogIH0sCiAgYXN5bmMgY3JlYXRlZCgpIHsKICAgIGxldCByZXN1bHQgPSBhd2FpdCBteWF4aW9zKCJHRVQiLCBnZXRzZXNzaW9uVVJMKTsKICAgIGlmIChyZXN1bHQuZGF0YS51c2VyKSB7CiAgICAgIHRoaXMudXNlciA9IHJlc3VsdC5kYXRhLnVzZXI7CiAgICB9CiAgICBpZiAodGhpcy51c2VyID09ICIiKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvbG9naW4iKTsKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICBtdWkoIi5tdWktc2Nyb2xsLXdyYXBwZXIiKS5zY3JvbGwoewogICAgICBkZWNlbGVyYXRpb246IDAuMDAwNSAvL2ZsaWNrIOWHj+mAn+ezu+aVsO+8jOezu+aVsOi2iuWkp++8jOa7muWKqOmAn+W6pui2iuaFou+8jOa7muWKqOi3neemu+i2iuWwj++8jOm7mOiupOWAvDAuMDAwNgogICAgfSk7CiAgfQp9Owo="},{"version":3,"sources":["post.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"post.vue","sourceRoot":"src/views/post_components","sourcesContent":["<template>\n  <div id=\"postArticle\" class=\"abc\">\n    <div class=\"p-header\">\n      <div class=\"h-content\">\n        <div class=\"back\" @click=\"$router.back(-1)\">返回</div>\n        <div class=\"plabel\">Fresh News</div>\n        <div class=\"p-name\">{{user.nickname}}</div>\n      </div>\n    </div>\n    <div class=\"mui-scroll-wrapper\">\n      <div class=\"mui-scroll\">\n        <div class=\"p-main\">\n          <div class=\"p-title\">\n            <input type=\"text\" ref=\"title\" placeholder=\"填写标题会吸引更多关注奥 ~\" />\n          </div>\n          <div class=\"p-content\">\n            <textarea id=\"editor\" name=\"editor\" placeholder=\"有什么新鲜事？说说吧！\"></textarea>\n          </div>\n          <div class=\"p-img\">\n            <van-uploader\n              v-model=\"fileList\"\n              multiple\n              :max-count=\"9\"\n              preview-size=\"100px\"\n              :after-read=\"afterRead\"\n              image-fit=\"contain\"\n            />\n            <!--  <img src=\"\" alt=\"\"> -->\n            <!-- <img src='@/../public/icon/addimg-default.png' /> -->\n          </div>\n          <div class=\"p-classify\">\n            <div class=\"c-text\">分类</div>\n            <div class=\"c-tags\">\n              <select name=\"plate\" id=\"plate\" ref=\"plate\">\n                <option value=\"travel\">旅游</option>\n                <option value=\"game\">游戏</option>\n                <option value=\"movie\">电影</option>\n                <option value=\"music\">音乐</option>\n                <option value=\"funny\">搞笑</option>\n                <option value=\"technology\">科技</option>\n                <option value=\"sports\">体育</option>\n                <option value=\"car\">汽车</option>\n                <option value=\"food\">美食</option>\n              </select>\n            </div>\n          </div>\n          <div class=\"p-bottom\">\n            <button @click=\"postBtn\">Post</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { Toast } from \"mint-ui\";\nimport myaxios, { posttopicURL, getsessionURL } from \"@/tools/myaxios.js\";\nimport { EALREADY } from \"constants\";\nimport mui from \"@/../lib/mui/js/mui.js\";\nimport axios from \"axios\";\nexport default {\n  data: function() {\n    return {\n      user: [],\n      img_src: [],\n      fileList: []\n    };\n  },\n  methods: {\n    afterRead() {},\n    async postBtn() {\n      var plate = this.$refs.plate.value;\n      var title = this.$refs.title.value;\n      var content = document.getElementById(\"editor\").value;\n      var i = this.fileList;\n      let params = new FormData();\n      params.append(\"plate\", plate);\n      params.append(\"title\", title);\n      params.append(\"content\", content);\n      i.map(item => {\n        var img = item.file;\n        params.append(\"file\", img);\n      });\n      Toast(\"正在上传图片...\");\n      axios\n        .post(\"/api/uploadimg\", params, {\n          headers: { \"Content-Type\": \"multipart/form-data\" }\n        })\n        .then(res => {\n          if (res.data.code == 101) {\n            this.$router.push(\"/\");\n            Toast(res.data.message);\n          } else if (res.data.code == 102) {\n            this.$router.push(\"/login\");\n            Toast(res.data.message);\n          } else {\n            Toast(res.data.message);\n          }\n        });\n    }\n  },\n  async created() {\n    let result = await myaxios(\"GET\", getsessionURL);\n    if (result.data.user) {\n      this.user = result.data.user;\n    }\n    if (this.user == \"\") {\n      this.$router.push(\"/login\");\n    }\n  },\n  mounted() {\n    mui(\".mui-scroll-wrapper\").scroll({\n      deceleration: 0.0005 //flick 减速系数，系数越大，滚动速度越慢，滚动距离越小，默认值0.0006\n    });\n  }\n};\n</script>\n\n\n\n\n<style lang=\"less\" scoped>\n.abc {\n  height: 100%;\n  bottom: 43px;\n}\n.mui-scroll-wrapper {\n  top: 50px;\n  bottom: 54px;\n}\n#postArticle {\n  height: 100%;\n}\n.p-header {\n  position: fixed;\n  top: 0;\n  width: 100%;\n  background-color: white;\n  height: 50px;\n  display: flex;\n  z-index: 1000;\n  .h-content {\n    height: 50px;\n    margin: 0 auto;\n    .back {\n      position: fixed;\n      top: 12.5px;\n      left: 9px;\n      line-height: 30px;\n      font-size: 15px;\n    }\n    .plabel {\n      color: black;\n      font-size: 18px;\n      font-weight: bold;\n      height: 30px;\n      line-height: 30px;\n    }\n    .p-name {\n      text-align: center;\n      font-size: 14px;\n      color: grey;\n      height: 20px;\n      margin: 0 auto;\n      line-height: 20px;\n    }\n  }\n}\n.p-main {\n  padding-left: 8px;\n  padding-right: 8px;\n  padding-top: 8px;\n  height: 100%;\n  width: 100%;\n  .p-img {\n    margin-top: 10px;\n    padding: 5px;\n\n    background-color: white;\n  }\n  input::-webkit-input-placeholder {\n    /* WebKit browsers 适配谷歌 */\n    text-align: start;\n  }\n  .p-title {\n    height: 50px;\n    margin-top: 10px;\n    input[type=\"text\"] {\n      border: none;\n      height: 50px;\n      line-height: 40px;\n      color: black;\n    }\n  }\n  .p-content {\n    margin-top: 10px;\n    width: 100%;\n    height: 250px;\n    textarea {\n      border: none;\n      width: 100%;\n      height: 100%;\n      color: gray;\n    }\n  }\n  .p-classify {\n    width: 100%;\n    height: 50px;\n    margin-top: 10px;\n    font-size: 18px;\n    background-color: white;\n    .c-text {\n      padding-left: 5px;\n      width: 100px;\n      height: 50px;\n      float: left;\n      line-height: 50px;\n    }\n    .c-tags {\n      width: 100px;\n      height: 50px;\n      float: right;\n      border-radius: 25px;\n      select {\n        margin: 0;\n        padding: 0;\n        line-height: 50px;\n        font-size: 18px;\n      }\n    }\n  }\n  .p-bottom {\n    margin-top: 10px;\n    width: 100%;\n    height: 50px;\n\n    text-align: center;\n    button {\n      width: 100%;\n      height: 50px;\n      font-size: 20px;\n      color: white;\n      background-color: rgb(255, 60, 60);\n      border-radius: 25px;\n    }\n  }\n}\n</style>"]}]}