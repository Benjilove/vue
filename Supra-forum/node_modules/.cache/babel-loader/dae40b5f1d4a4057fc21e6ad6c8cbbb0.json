{"remainingRequest":"/Users/a123/Desktop/Supra-forum/node_modules/thread-loader/dist/cjs.js!/Users/a123/Desktop/Supra-forum/node_modules/babel-loader/lib/index.js!/Users/a123/Desktop/Supra-forum/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/a123/Desktop/Supra-forum/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/a123/Desktop/Supra-forum/src/views/post_components/post.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/a123/Desktop/Supra-forum/src/views/post_components/post.vue","mtime":1575012514000},{"path":"/Users/a123/Desktop/Supra-forum/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/a123/Desktop/Supra-forum/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/a123/Desktop/Supra-forum/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/a123/Desktop/Supra-forum/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/a123/Desktop/Supra-forum/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgVG9hc3QgfSBmcm9tICJtaW50LXVpIjsKaW1wb3J0IG15YXhpb3MsIHsgcG9zdHRvcGljVVJMLCBnZXRzZXNzaW9uVVJMIH0gZnJvbSAiQC90b29scy9teWF4aW9zLmpzIjsKaW1wb3J0IHsgRUFMUkVBRFkgfSBmcm9tICJjb25zdGFudHMiOwppbXBvcnQgbXVpIGZyb20gIkAvLi4vbGliL211aS9qcy9tdWkuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXI6IFtdLAogICAgICBpbWdfc3JjOiBbXSwKICAgICAgZmlsZUxpc3Q6IFtdCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgYWZ0ZXJSZWFkOiBmdW5jdGlvbiBhZnRlclJlYWQoKSB7fSwKICAgIHBvc3RCdG46IGZ1bmN0aW9uIHBvc3RCdG4oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgcGxhdGUsIHRpdGxlLCBjb250ZW50LCBpLCBwYXJhbXM7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUuYXN5bmMoZnVuY3Rpb24gcG9zdEJ0biQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgcGxhdGUgPSB0aGlzLiRyZWZzLnBsYXRlLnZhbHVlOwogICAgICAgICAgICAgIHRpdGxlID0gdGhpcy4kcmVmcy50aXRsZS52YWx1ZTsKICAgICAgICAgICAgICBjb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImVkaXRvciIpLnZhbHVlOwogICAgICAgICAgICAgIGkgPSB0aGlzLmZpbGVMaXN0OwogICAgICAgICAgICAgIHBhcmFtcyA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoInBsYXRlIiwgcGxhdGUpOwogICAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoInRpdGxlIiwgdGl0bGUpOwogICAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoImNvbnRlbnQiLCBjb250ZW50KTsKICAgICAgICAgICAgICBpLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgdmFyIGltZyA9IGl0ZW0uZmlsZTsKICAgICAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoImZpbGUiLCBpbWcpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIFRvYXN0KCLmraPlnKjkuIrkvKDlm77niYcuLi4iKTsKICAgICAgICAgICAgICBheGlvcy5wb3N0KCIvYXBpL3VwbG9hZGltZyIsIHBhcmFtcywgewogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAiQ29udGVudC1UeXBlIjogIm11bHRpcGFydC9mb3JtLWRhdGEiCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PSAxMDEpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKCIvIik7CgogICAgICAgICAgICAgICAgICBUb2FzdChyZXMuZGF0YS5tZXNzYWdlKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzLmRhdGEuY29kZSA9PSAxMDIpIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuJHJvdXRlci5wdXNoKCIvbG9naW4iKTsKCiAgICAgICAgICAgICAgICAgIFRvYXN0KHJlcy5kYXRhLm1lc3NhZ2UpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgVG9hc3QocmVzLmRhdGEubWVzc2FnZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBudWxsLCB0aGlzKTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgcmVzdWx0OwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS5hc3luYyhmdW5jdGlvbiBjcmVhdGVkJChfY29udGV4dDIpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKG15YXhpb3MoIkdFVCIsIGdldHNlc3Npb25VUkwpKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgaWYgKHJlc3VsdC5kYXRhLnVzZXIpIHsKICAgICAgICAgICAgICB0aGlzLnVzZXIgPSByZXN1bHQuZGF0YS51c2VyOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAodGhpcy51c2VyID09ICIiKSB7CiAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9sb2dpbiIpOwogICAgICAgICAgICB9CgogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBudWxsLCB0aGlzKTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICBtdWkoIi5tdWktc2Nyb2xsLXdyYXBwZXIiKS5zY3JvbGwoewogICAgICBkZWNlbGVyYXRpb246IDAuMDAwNSAvL2ZsaWNrIOWHj+mAn+ezu+aVsO+8jOezu+aVsOi2iuWkp++8jOa7muWKqOmAn+W6pui2iuaFou+8jOa7muWKqOi3neemu+i2iuWwj++8jOm7mOiupOWAvDAuMDAwNgoKICAgIH0pOwogIH0KfTs="},{"version":3,"sources":["post.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA,SAAA,KAAA,QAAA,SAAA;AACA,OAAA,OAAA,IAAA,YAAA,EAAA,aAAA,QAAA,oBAAA;AACA,SAAA,QAAA,QAAA,WAAA;AACA,OAAA,GAAA,MAAA,wBAAA;AACA,OAAA,KAAA,MAAA,OAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,gBAAA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,EADA;AAEA,MAAA,OAAA,EAAA,EAFA;AAGA,MAAA,QAAA,EAAA;AAHA,KAAA;AAKA,GAPA;AAQA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,uBACA,CAAA,CADA;AAEA,IAAA,OAFA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA,cAAA,KAHA,GAGA,KAAA,KAAA,CAAA,KAAA,CAAA,KAHA;AAIA,cAAA,KAJA,GAIA,KAAA,KAAA,CAAA,KAAA,CAAA,KAJA;AAKA,cAAA,OALA,GAKA,QAAA,CAAA,cAAA,CAAA,QAAA,EAAA,KALA;AAMA,cAAA,CANA,GAMA,KAAA,QANA;AAOA,cAAA,MAPA,GAOA,IAAA,QAAA,EAPA;AAQA,cAAA,MAAA,CAAA,MAAA,CAAA,OAAA,EAAA,KAAA;AACA,cAAA,MAAA,CAAA,MAAA,CAAA,OAAA,EAAA,KAAA;AACA,cAAA,MAAA,CAAA,MAAA,CAAA,SAAA,EAAA,OAAA;AACA,cAAA,CAAA,CAAA,GAAA,CAAA,UAAA,IAAA,EAAA;AACA,oBAAA,GAAA,GAAA,IAAA,CAAA,IAAA;AACA,gBAAA,MAAA,CAAA,MAAA,CAAA,MAAA,EAAA,GAAA;AACA,eAHA;AAIA,cAAA,KAAA,CAAA,WAAA,CAAA;AACA,cAAA,KAAA,CACA,IADA,CACA,gBADA,EACA,MADA,EACA;AACA,gBAAA,OAAA,EAAA;AAAA,kCAAA;AAAA;AADA,eADA,EAIA,IAJA,CAIA,UAAA,GAAA,EAAA;AACA,oBAAA,GAAA,CAAA,IAAA,CAAA,IAAA,IAAA,GAAA,EAAA;AACA,kBAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,GAAA;;AACA,kBAAA,KAAA,CAAA,GAAA,CAAA,IAAA,CAAA,OAAA,CAAA;AACA,iBAHA,MAGA,IAAA,GAAA,CAAA,IAAA,CAAA,IAAA,IAAA,GAAA,EAAA;AACA,kBAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,QAAA;;AACA,kBAAA,KAAA,CAAA,GAAA,CAAA,IAAA,CAAA,OAAA,CAAA;AACA,iBAHA,MAGA;AACA,kBAAA,KAAA,CAAA,GAAA,CAAA,IAAA,CAAA,OAAA,CAAA;AACA;AACA,eAdA;;AAhBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GARA;AAyCA,EAAA,OAzCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4CA0CA,OAAA,CAAA,KAAA,EAAA,aAAA,CA1CA;;AAAA;AA0CA,YAAA,MA1CA;;AA2CA,gBAAA,MAAA,CAAA,IAAA,CAAA,IAAA,EAAA;AACA,mBAAA,IAAA,GAAA,MAAA,CAAA,IAAA,CAAA,IAAA;AACA;;AACA,gBAAA,KAAA,IAAA,IAAA,EAAA,EAAA;AACA,mBAAA,OAAA,CAAA,IAAA,CAAA,QAAA;AACA;;AAhDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAkDA,EAAA,OAlDA,qBAkDA;AACA,IAAA,GAAA,CAAA,qBAAA,CAAA,CAAA,MAAA,CAAA;AACA,MAAA,YAAA,EAAA,MADA,CACA;;AADA,KAAA;AAGA;AAtDA,CAAA","sourcesContent":["<template>\n  <div id=\"postArticle\" class=\"abc\">\n    <div class=\"p-header\">\n      <div class=\"h-content\">\n        <div class=\"back\" @click=\"$router.back(-1)\">返回</div>\n        <div class=\"plabel\">Fresh News</div>\n        <div class=\"p-name\">{{user.nickname}}</div>\n      </div>\n    </div>\n    <div class=\"mui-scroll-wrapper\">\n      <div class=\"mui-scroll\">\n        <div class=\"p-main\">\n          <div class=\"p-title\">\n            <input type=\"text\" ref=\"title\" placeholder=\"填写标题会吸引更多关注奥 ~\" />\n          </div>\n          <div class=\"p-content\">\n            <textarea id=\"editor\" name=\"editor\" placeholder=\"有什么新鲜事？说说吧！\"></textarea>\n          </div>\n          <div class=\"p-img\">\n            <van-uploader\n              v-model=\"fileList\"\n              multiple\n              :max-count=\"9\"\n              preview-size=\"100px\"\n              :after-read=\"afterRead\"\n              image-fit=\"contain\"\n            />\n            <!--  <img src=\"\" alt=\"\"> -->\n            <!-- <img src='@/../public/icon/addimg-default.png' /> -->\n          </div>\n          <div class=\"p-classify\">\n            <div class=\"c-text\">分类</div>\n            <div class=\"c-tags\">\n              <select name=\"plate\" id=\"plate\" ref=\"plate\">\n                <option value=\"travel\">旅游</option>\n                <option value=\"game\">游戏</option>\n                <option value=\"movie\">电影</option>\n                <option value=\"music\">音乐</option>\n                <option value=\"funny\">搞笑</option>\n                <option value=\"technology\">科技</option>\n                <option value=\"sports\">体育</option>\n                <option value=\"car\">汽车</option>\n                <option value=\"food\">美食</option>\n              </select>\n            </div>\n          </div>\n          <div class=\"p-bottom\">\n            <button @click=\"postBtn\">Post</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { Toast } from \"mint-ui\";\nimport myaxios, { posttopicURL, getsessionURL } from \"@/tools/myaxios.js\";\nimport { EALREADY } from \"constants\";\nimport mui from \"@/../lib/mui/js/mui.js\";\nimport axios from \"axios\";\nexport default {\n  data: function() {\n    return {\n      user: [],\n      img_src: [],\n      fileList: []\n    };\n  },\n  methods: {\n    afterRead() {},\n    async postBtn() {\n      var plate = this.$refs.plate.value;\n      var title = this.$refs.title.value;\n      var content = document.getElementById(\"editor\").value;\n      var i = this.fileList;\n      let params = new FormData();\n      params.append(\"plate\", plate);\n      params.append(\"title\", title);\n      params.append(\"content\", content);\n      i.map(item => {\n        var img = item.file;\n        params.append(\"file\", img);\n      });\n      Toast(\"正在上传图片...\");\n      axios\n        .post(\"/api/uploadimg\", params, {\n          headers: { \"Content-Type\": \"multipart/form-data\" }\n        })\n        .then(res => {\n          if (res.data.code == 101) {\n            this.$router.push(\"/\");\n            Toast(res.data.message);\n          } else if (res.data.code == 102) {\n            this.$router.push(\"/login\");\n            Toast(res.data.message);\n          } else {\n            Toast(res.data.message);\n          }\n        });\n    }\n  },\n  async created() {\n    let result = await myaxios(\"GET\", getsessionURL);\n    if (result.data.user) {\n      this.user = result.data.user;\n    }\n    if (this.user == \"\") {\n      this.$router.push(\"/login\");\n    }\n  },\n  mounted() {\n    mui(\".mui-scroll-wrapper\").scroll({\n      deceleration: 0.0005 //flick 减速系数，系数越大，滚动速度越慢，滚动距离越小，默认值0.0006\n    });\n  }\n};\n</script>\n\n\n\n\n<style lang=\"less\" scoped>\n.abc {\n  height: 100%;\n  bottom: 43px;\n}\n.mui-scroll-wrapper {\n  top: 50px;\n  bottom: 54px;\n}\n#postArticle {\n  height: 100%;\n}\n.p-header {\n  position: fixed;\n  top: 0;\n  width: 100%;\n  background-color: white;\n  height: 50px;\n  display: flex;\n  z-index: 1000;\n  .h-content {\n    height: 50px;\n    margin: 0 auto;\n    .back {\n      position: fixed;\n      top: 12.5px;\n      left: 9px;\n      line-height: 30px;\n      font-size: 15px;\n    }\n    .plabel {\n      color: black;\n      font-size: 18px;\n      font-weight: bold;\n      height: 30px;\n      line-height: 30px;\n    }\n    .p-name {\n      text-align: center;\n      font-size: 14px;\n      color: grey;\n      height: 20px;\n      margin: 0 auto;\n      line-height: 20px;\n    }\n  }\n}\n.p-main {\n  padding-left: 8px;\n  padding-right: 8px;\n  padding-top: 8px;\n  height: 100%;\n  width: 100%;\n  .p-img {\n    margin-top: 10px;\n    padding: 5px;\n\n    background-color: white;\n  }\n  input::-webkit-input-placeholder {\n    /* WebKit browsers 适配谷歌 */\n    text-align: start;\n  }\n  .p-title {\n    height: 50px;\n    margin-top: 10px;\n    input[type=\"text\"] {\n      border: none;\n      height: 50px;\n      line-height: 40px;\n      color: black;\n    }\n  }\n  .p-content {\n    margin-top: 10px;\n    width: 100%;\n    height: 250px;\n    textarea {\n      border: none;\n      width: 100%;\n      height: 100%;\n      color: gray;\n    }\n  }\n  .p-classify {\n    width: 100%;\n    height: 50px;\n    margin-top: 10px;\n    font-size: 18px;\n    background-color: white;\n    .c-text {\n      padding-left: 5px;\n      width: 100px;\n      height: 50px;\n      float: left;\n      line-height: 50px;\n    }\n    .c-tags {\n      width: 100px;\n      height: 50px;\n      float: right;\n      border-radius: 25px;\n      select {\n        margin: 0;\n        padding: 0;\n        line-height: 50px;\n        font-size: 18px;\n      }\n    }\n  }\n  .p-bottom {\n    margin-top: 10px;\n    width: 100%;\n    height: 50px;\n\n    text-align: center;\n    button {\n      width: 100%;\n      height: 50px;\n      font-size: 20px;\n      color: white;\n      background-color: rgb(255, 60, 60);\n      border-radius: 25px;\n    }\n  }\n}\n</style>"],"sourceRoot":"src/views/post_components"}]}